# Copy to ../.env.production and adjust per environment
FLASK_ENV=production
# Generate with: openssl rand -hex 32
SECRET_KEY=
SCAFFOLD_APP_MODULES=scaffold.apps.auth.routes,scaffold.apps.admin,scaffold.apps.bia,scaffold.apps.csa,scaffold.apps.template,scaffold.apps.dpia
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax
# Keep local login available alongside SAML
PASSWORD_LOGIN_ENABLED=true
BIA_COMPONENTS_PER_PAGE=25
PREFERRED_URL_SCHEME=https
PROXY_FIX_ENABLED=true
PROXY_FIX_X_FOR=1
PROXY_FIX_X_PROTO=1
PROXY_FIX_X_HOST=1
PROXY_FIX_X_PORT=0
PROXY_FIX_X_PREFIX=0
PORT=8000

# Export artefact cleanup (runs in background when enabled)
EXPORT_CLEANUP_ENABLED=false
EXPORT_CLEANUP_MAX_AGE_DAYS=7
EXPORT_CLEANUP_INTERVAL_MINUTES=60

# SAML single sign-on settings
SAML_SP_ENTITY_ID=https://example.com/saml/metadata
SAML_SP_ACS_URL=https://example.com/auth/login/saml/acs
SAML_SP_SLS_URL=https://example.com/auth/login/saml/sls
# Optional: embed PEM-encoded certificate/private key if signing requests
SAML_SP_CERT=
SAML_SP_PRIVATE_KEY=
SAML_IDP_ENTITY_ID=
SAML_IDP_SSO_URL=
SAML_IDP_SLO_URL=
# Paste base64 content without PEM markers or whitespace.
SAML_IDP_CERT=
# For rotations, provide comma- or newline-separated base64 strings (without PEM markers).
SAML_IDP_CERT_MULTI=
SAML_NAMEID_FORMAT=urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified
SAML_SIGN_AUTHN_REQUESTS=false
SAML_SIGN_LOGOUT_REQUESTS=false
SAML_SIGN_LOGOUT_RESPONSES=false
SAML_WANT_MESSAGE_SIGNED=false
SAML_WANT_ASSERTION_SIGNED=true
SAML_LOGOUT_RETURN_URL=
SAML_ALLOWED_GROUP_IDS=
# JSON object mapping Entra group IDs (lowercase GUIDs) to one or more role names
# Example: {"00000000-0000-0000-0000-000000000000": ["admin", "manager"]}
SAML_ROLE_MAP=
# Optional: store Entra group â†’ role mappings in the database (overrides env map when present)
# Set to true if using the admin UI to configure mappings dynamically.
ENTRA_ROLE_MAP_USE_DB=true
SAML_ATTRIBUTE_GROUPS=http://schemas.microsoft.com/ws/2008/06/identity/claims/groups
SAML_ATTRIBUTE_EMAIL=http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress
SAML_ATTRIBUTE_FIRST_NAME=http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname
SAML_ATTRIBUTE_LAST_NAME=http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname
SAML_ATTRIBUTE_DISPLAY_NAME=http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name
SAML_ATTRIBUTE_OBJECT_ID=http://schemas.microsoft.com/identity/claims/objectidentifier
SAML_ATTRIBUTE_UPN=http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn
SAML_STRICT=true
SAML_DEBUG=false
# Comma-separated AuthnContext URNs; set to 'none' to omit the element
SAML_REQUESTED_AUTHN_CONTEXT=none
# Valid values: exact, minimum, better, maximum (Microsoft Entra expects 'exact')
SAML_REQUESTED_AUTHN_CONTEXT_COMPARISON=exact

# Postgres defaults for the bundled compose file
POSTGRES_DB=scaffold
POSTGRES_USER=scaffold
POSTGRES_PASSWORD=scaffold
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql+psycopg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Automated restore service
RESTORE_WATCH_DIR=/restore/incoming
RESTORE_STATE_FILE=/restore/state/restore-state.json
RESTORE_POLL_INTERVAL=30
RESTORE_STOP_CONTAINERS=assessment-app-web-1
RESTORE_START_CONTAINERS=
RESTORE_STOP_TIMEOUT=30
RESTORE_STOP_WAIT_SECONDS=5
RESTORE_START_WAIT_SECONDS=5
RESTORE_SQLITE_BASE=/app
RESTORE_SQLITE_PATH=
MAINTENANCE_CONTACT_EMAIL=support@example.com
MAINTENANCE_CONTACT_LABEL=Support Team
MAINTENANCE_CONTACT_LINK=

